/***************************************************************************
* Copyright Â© 2025 InVue Security Products, Charlotte, NC
* All Rights Reserved.
*
*  File: WptController.c
*
*  Description: Code to handle the control of the Wireless Power Transfer
*               (WPT) functionality.
**
****************************************************************************/
#include "WptController.h"

#define WPT_DEFAULT_DUTY_CYCLE (50)

static uint16_t WptPercentDutyCycle = WPT_DEFAULT_DUTY_CYCLE;


/*****************************************************************
*   void WptControllerInit(void)
*
*   Description: This function initializes the Wireless Power Transfer
*                Controller.
*
*    parameters: None.
*
* return values: None
*
* ****************************************************************/
void WptControllerInit(void)
{
	// Get the Wireless Power Transfer percent duty cycle from flash
	// TODO: setup WPT duty cycle storage and retrieval to/from flash.

	// 	Set the WPT PWM duty cycle.
	hal_timer_RunPwAtDutyCycle(TIMER_WPT_PWM, (WptPercentDutyCycle * 100));

}

bool WptSetCalibrationValue(uint16_t NewCalibrationValue)
{
	return false;
}

